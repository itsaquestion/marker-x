
## Beyond Equilibrium: Revisiting Two-Sided Markets From An Agent-Based Modelling Perspective Torsten Heinrich



Institute for New Economic Thinking (INET) at the Oxford Martin School, University of Oxford, Walton Well Road - Eagle House, OX2 6ED Oxford, UK and Institute for Institutional and Innovation Economics (IINO), University of Bremen, Hochschulring 4, D-28359 Bremen, Germany Email: torsten.heinrich@maths.ox.ac.uk

英国牛津大学马丁学院的新经济思维研究所（INET）位于沃尔顿韦尔路鹰楼（Eagle House），邮编为OX2 6ED。德国不来梅大学机构与创新经济学研究所（IINO）位于不来梅市高等教育环4号，邮编为D-28359。联系邮箱为torsten.heinrich@maths.ox.ac.uk。

## Claudius Gräbner*



Institute for Comprehensive Analysis of the Economy, Johannes Kepler University Linz, Altenbergerstraße 52, 4040 Linz, Austria Email: claudius@claudius-graebner.com
*Corresponding author Abstract: Two-sided markets are an important aspect of today's economies.

奥地利林茨约翰内斯·开普勒大学经济综合分析研究所位于林茨市阿尔滕贝格大街52号，邮编为4040。通讯作者邮箱为claudius@claudius-graebner.com。
摘要：如今的经济中，双边市场扮演着重要的角色。

Yet, the attention they have received in economic theory is limited, mainly due to methodological constraints of conventional approaches: Two-sided markets often exhibit non-trivial dynamics that are difficult to describe via analytical equilibrium models. We illustrate this point by revisiting a well-known equilibrium model of two-sided markets by Rochet and Tirole from an agentbased computational perspective. We identify several inconsistencies as well as implicit and implausible assumptions of the original model. These limit its explanatory power and motivate an alternative approach. The agent-based model we propose allows us to study two-sided markets in a more realistic and adequate manner: Not only are we able to compare different decision-making rules for the providers, we can also study situations with more than two providers. Thus, our model represents a first step towards a more realistic and policy-relevant study of two-sided markets.

然而，由于传统方法的方法论限制，对双边市场的关注在经济理论中相对有限。这主要是因为双边市场往往呈现出复杂的动态，难以通过分析均衡模型来准确描述。本文通过从基于主体计算的视角重新审视Rochet和Tirole提出的一个众所周知的双边市场均衡模型来阐述这一观点。我们发现了原始模型中存在的几个不一致性以及隐含和不合理的假设。这些限制了该模型解释力，并促使我们寻求替代方法。我们提出的基于主体模型使我们能够以更加真实和恰当的方式研究双边市场：我们不仅能够比较供应商之间不同的决策规则，还可以研究多于两个供应商存在情况下的情况。因此，我们的模型是朝着更加真实和与政策相关性研究双边市场迈出的第一步。

Keywords: two-sided markets; network externalities; agent-based modelling;
simulation; heuristic decision making; reinforcement learning; satisficing; differential evolution; evolutionary economics; market structure; IT economics; equilibrium dynamics.

关键词：双边市场；网络外部性；基于主体的建模；模拟；启发式决策制定；强化学习；满足性决策；差分进化算法；进化经济学；市场结构；信息技术经济学；均衡动态。

Reference to this paper should be made as follows: Heinrich, T. and Gräbner, C.

引用本文应按照以下方式进行：Heinrich, T.和Gräbner, C.

(2019) 'Beyond equilibrium: revisiting two-sided markets from an agent-based modelling perspective', *Int. J. Computational Economics and Econometrics*, Vol. 9, No. 3, pp.153–180.

(2019) '超越均衡：从基于主体建模的视角重新审视双边市场',《国际计算经济学与计量经济学杂志》，第9卷，第3期，第153-180页。

Biographical notes: Torsten Heinrich studied Economics at the Dresden University of Technology, Germany, and the Universidad Autónoma de Madrid, Spain. He received his PhD from the University of Bremen, Germany, in 2011
with a thesis on technological change and growth patterns under conditions of network effects. Working on complex systems, agent-based modelling, simulation and strategic games in economics, he edited special issues in scientific journals and authored both journal papers and monographs. He holds a postdoc position at the Institute for New Economic Thinking (INET) at the University of Oxford, UK, and teaches at the University of Bremen, Germany. Claudius Gräbner is a Research Associate at the Institute for Comprehensive Analysis of the Economy (ICAE) at the Johannes Kepler University Linz. He holds an undergraduate degree in social sciences, economics and law from the University of Erfurt, Germany, and obtained his PhD in Economics at the Institute for Institutional and Innovation Economics at the University of Bremen, Germany. His research interests include computational economics, development economics, game theory and econometrics. His main focus is on the evolutionary analysis of social institutions, the methodology of social sciences and the microeconomic effects of free trade agreements. This paper is a revised and expanded version of a paper entitled 'Beyond equilibrium: revisiting two-sided markets from an agent-based modelling perspective' presented at the *EAEPE Conference 2015*, Genoa, 17–19 September,
2015 and the *CCS Conference 2015*, Tempe, 28 September–2 October, 2015.

个人简介：Torsten Heinrich在德国德累斯顿工业大学和西班牙马德里自治大学攻读经济学。他于2011年在德国不来梅大学获得博士学位，论文研究了网络效应条件下的技术变革和增长模式。他在复杂系统、基于主体建模、经济模拟和战略博弈方面进行研究，并编辑了科学期刊的专题。目前，他在英国牛津大学新经济思维研究所担任博士后职位，并在德国不来梅大学任教。

Claudius Gräbner是奥地利林茨约翰内斯·开普勒大学综合经济分析研究所的研究助理。他拥有德国埃尔福特大学社会科学、经济和法律的本科学位，并在德国不来梅大学机构与创新经济研究所获得经济学博士学位。他的研究兴趣包括计算经济学、发展经济学、博弈论和计量经济学。他主要关注社会制度的演化分析、社会科学方法论和自由贸易协定的微观经济效应。

本文是一篇修订和扩展版的论文，题为“超越均衡：从基于主体建模的视角重新审视双边市场”，该论文曾于2015年9月17日至19日在意大利热那亚举办的EAEPE会议以及2015年9月28日至10月2日在美国亚利桑那州举办的CCS会议上发表。

## 1 Introduction



Two-sided-markets (TSM) are of tremendous significance in the economy: a market is called two-sided if there are two groups of customers, usually buyers and sellers, that require the service of a third party to conduct transactions with each other. This third party is called provider. Examples for TSM include credit card systems (where the provider is the credit card company), video games (where the provider is the producer of video game consoles) or personal computers (where the provider is the producer of an operating system).1
TSM pose huge difficulties for conventional economic analysis: the interaction among three types of agents quickly yields nonlinear dynamics that are very difficult to capture with standard equilibrium models. One reason is that the provider's service exhibits network externalities in the sense that her service becomes more valuable to the customers the more customers are already signed up. Usually, network externalities for users of any one side are generated by the network of users on the other side. In such cases, customers of both sides must be present for the network externalities to materialise either directly or indirectly. On top of this, the strategy space for the provider is *at least* 4-dimensional: She can charge customers for general membership in her network, and per executed transaction through his network. She can also set different prices for the two sides. In extreme cases, one side might even be subsidised (i.e., 'charged' negative prices).

1 引言

双边市场（TSM）在经济中具有重要的意义：如果存在两个客户群体，通常是买方和卖方，它们需要第三方提供服务来进行彼此之间的交易。这个第三方被称为提供者。双边市场的例子包括信用卡系统（其中提供者是信用卡公司）、视频游戏（其中提供者是视频游戏主机制造商）或个人电脑（其中提供者是操作系统的生产商）。1

传统经济分析面临着双边市场带来的巨大困难：三种类型主体之间的相互作用很快产生非线性动态，这在标准均衡模型中很难捕捉到。一个原因是提供者的服务具有网络外部性，也就是说她的服务对于客户来说越有价值，已经注册使用该服务的客户越多。通常情况下，任何一方用户的网络外部性都由另一方用户组成的网络所生成。在这种情况下，两个方面的客户必须同时存在才能直接或间接地实现网络外部性。此外，提供者的策略空间至少是4维度：她可以向其网络中的客户收取一般会员费，以及每笔交易的费用。她还可以为两个方面设置不同的价格。在极端情况下，一方甚至可能得到补贴（即“收取”负价格）。

This is a common business practice: temporary premium benefits or even monetary incentives, for example, are frequently offered for new users in online market platform; credit card companies often maintain bonus point systems and may give cash rewards to frequent users.

这是一种常见的商业实践：在线市场平台经常为新用户提供临时的额外福利甚至是货币激励；信用卡公司通常会维护积分系统，并可能向经常使用者提供现金奖励。

In this paper, we contribute to a better understanding of TSM on two levels: On the methodological level we illustrate the inadequacy of an equilibrium approach to the study of TSM. We do this by focusing on one of the canonical equilibrium models, the one by Rochet and Tirole (2003, 2006). Analytically we show that the model remains intransparent regarding the strong assumptions required to ensure a unique and stable equilibrium. We also build a computational agent-based version of the model that helps to make transparent many of the other implicit assumptions made by Rochet and Tirole - a strategy that has proven successful since at least Gode and Sunder (1993). By doing so we illustrate the limitations of the analytical equilibrium-approach: in order to keep the model tractable one needs to reduce the possibility space for the providers to a minimum, and must assume away most of the non-linearities present in the system. The resulting models are unable to capture either the price differentiation between different user groups, business strategies that depend on disentangling entry and transaction fees, or the true uncertainty faced by the providers. This would be less severe if the consequences of these implausible assumptions were negligible. By exploiting the modularity of our computational model we show that taking even a small step towards a more realistic description of the TSM system has significant consequences. This raises the methodological concern of whether equilibrium models are credible means to study TSM at all.

本文旨在对TSM进行更深入的理解，从两个层面上做出贡献：在方法论层面上，我们展示了采用均衡方法研究TSM的不足。我们通过对Rochet和Tirole（2003年，2006年）提出的经典均衡模型进行重点分析来证明这一点。从分析角度上看，我们发现该模型在确保唯一且稳定均衡所需的强假设方面存在不透明性。为了弥补这一不足，我们构建了一个基于计算主体的模型版本，以揭示Rochet和Tirole所隐含的其他假设 - 这种策略自Gode和Sunder（1993年）以来已被证明是成功的。通过这样做，我们展示了分析均衡方法的局限性：为了使模型易于处理，必须将服务提供商的可能空间减少到最低，并且必须排除系统中存在的大部分非线性因素。由此产生的模型无法捕捉到不同用户群体之间价格差异、依赖于解开入口和交易费用之间联系的商业策略以及服务提供商面临真正不确定性等情况。如果这些不合理假设造成的后果可以忽略不计，那么问题就不会那么严重。通过利用我们计算模型的模块化特性，我们展示了朝着对TSM系统进行更现实描述的小步骤所带来的重要后果。这引发了对均衡模型是否是研究TSM的可信手段的方法论担忧。

Our second contribution is on the substantial level and consists of the ABM as such:
our model is able to capture the most important aspects of TSM and provides some first key insights into the functioning of TSM that already go beyond what can be achieved with current equilibrium models. In particular, we are able to show how the number of providers affects the market outcome, what kinds of strategies providers can develop to sustain their profits (and what kinds of strategies are likely to fail), and what regularities or characteristics are to be expected in the development of these systems. Our model thus represents a first step in studying TSM from an ABM perspective and serves as an illustration of both the usefulness and the necessity of such an approach.

我们的第二个贡献在实质层面上是关于基于主体模型（ABM）的。我们的模型能够捕捉到TSM最重要的方面，并提供了一些关于TSM运作方式的首要见解，这已经超越了目前均衡模型所能达到的范围。特别是，我们展示了供应商数量如何影响市场结果，供应商可以制定哪些策略来维持他们的利润（以及哪些策略可能会失败），以及在这些系统发展中可以预期到什么样的规律或特征。因此，我们的模型代表了从ABM视角研究TSM的第一步，并且既展示了这种方法论的有用性和必要性。

The rest of the paper is structured as follows: after giving a short overview of the existing literature in Section 2, Section 3 explains the fundamental problems of the equilibrium approach to TSM as taken by Rochet and Tirole (2006). A rigorous discussion of the model - which provides analytical insights that go beyond what Rochet and Tirole show in their papers - can be found in Appendix. Section 4 introduces our ABM and illustrates how the results of the equilibrium model depend on several crucial assumptions. In Section 5 we discuss the additional insights that can be derived from our computational model before we conclude in Section 6.

本文的后续部分结构如下：在第2节中，我们简要回顾了现有文献；第3节详细阐述了Rochet和Tirole（2006）所采用的均衡方法在TSM中所面临的基本问题。附录中提供了对该模型的深入讨论，该模型提供了比Rochet和Tirole在其论文中展示的更多的分析洞察力。第4节介绍了我们的ABM，并说明均衡模型结果如何依赖于几个关键假设。在第5节中，我们讨论了从我们的计算模型中可以得出的额外见解，最后在第6节进行总结。

## 2 Literature Review



The concept of two-sided markets was originally developed in the literature on banking and credit card systems to study the coordination of prices and fees between the involved financial institutions.2 The term was first used in Rochet and Tirole (2003), which was previously published as a working paper in 2000. It was quickly realised that network externalities are an important feature of the systems under investigation without which those systems could not be properly understood. Subsequent models (Rochet and Tirole, 2003, 2006; Armstrong, 2006; Choi, 2010; Peitz et al., 2011), therefore, generally referred to the game-theory-based equilibrium and welfare analysis of network externalities following Katz and Shapiro (1985). They did, however, ignore the literature on path dependence, lock-in, and non-equilibrium systems (David, 1985; Arthur et al., 1987), which are likely to arise from network externalities. From this perspective, and considering the argument that real business strategies are too complex to be captured by simple optimisation behaviour, computational non-equilibrium methods such as agent-based simulations seem to be an intuitivemodellingchoice.Indeed,inrecentyears,thisapproachtoTSMisreluctantlytaken: Peitz et al. (2011) perform Monte Carlo simulations to find optimal strategies in their model. Meyer (2012) proposes an agent-based model of two-sided markets, but concentrates on the network effects. He keeps pricing exogenous and focuses on computationally establishing the viability of his theoretical results. We now try to close the existing research gap by proposing a full-fledged agent-based model that can be used to study the pricing behaviour in TSM.

两边市场的概念最初是在银行和信用卡系统的文献中发展起来的，用于研究涉及金融机构之间价格和费用的协调。2这个术语最早是在Rochet和Tirole（2003）中使用的，该论文曾于2000年作为工作论文发表。很快人们意识到，网络外部性是所研究系统的一个重要特征，没有这些特征，这些系统就无法得到适当理解。因此，随后的模型（Rochet和Tirole, 2003, 2006; Armstrong, 2006; Choi, 2010; Peitz et al., 2011）通常参考了基于博弈论的均衡和福利分析以及Katz and Shapiro (1985)关于网络外部性的理论。然而，它们忽略了路径依赖、锁定以及非均衡系统（David, 1985; Arthur et al., 1987）等与网络外部性相关联可能出现的问题。从这个角度来看，并考虑到真实商业策略过于复杂无法通过简单优化行为捕捉到，基于主体模拟等计算非均衡方法似乎是一种直观建模选择。事实上，在近年来对TSM进行研究时，这种方法被勉强采用：Peitz等人（2011）通过蒙特卡洛模拟来寻找他们模型中的最优策略。Meyer（2012）提出了一个基于主体的两边市场模型，但专注于网络效应。他将定价视为外生变量，并着重于计算上验证他的理论结果的可行性。我们现在尝试通过提出一个完整的基于主体的模型来填补现有研究空白，该模型可用于研究TSM中的定价行为。

## 3 Formal Problems In The Canonical Rochet-Tirole Model



Analytical equilibrium models are currently the standard way to analyse TSM. It is one of the main messages of the present paper that such an approach can come with some serious drawbacks. We chose the model of Rochet and Tirole (2003, 2006) to illustrate this drawback since it is often considered a canonical model for TSM and is, therefore, representative of the conventional treatment of TSM.

目前，分析均衡模型是研究TSM的标准方法。本文的一个重要观点是，这种方法可能存在一些严重的缺陷。为了说明这一缺陷，我们选择了Rochet和Tirole（2003年，2006年）的模型作为例子，因为它通常被认为是TSM的典型模型，并代表了对TSM的传统处理方式。

The Rochet/Tirole model - as most equilibrium models - consists of three types of agents, buyers, sellers, and one single provider. Every buyer potentially interacts with every seller and the provider is able to facilitate all resulting transactions which are a constant share of all potential transactions - a strong assumption justified by the authors by referring to it as being common practice (Rochet and Tirole, 2006, p. 652).

Rochet/Tirole模型，像大多数均衡模型一样，由买方、卖方和一个唯一的提供者组成。每个买方都有可能与每个卖方进行互动，而提供者能够促成所有可能的交易，这些交易是所有潜在交易的一个恒定份额。这种强假设被作者称为常见做法，并且得到了合理的证明（Rochet and Tirole, 2006, p. 652）。

Buyers and sellers receive a total benefit from being part of the provider's network and a per-transaction benefit. The provider charges them a membership fee and a transaction fee while incurring a per-customer and a per-transaction cost. The authors then postulate the existence of a unique equilibrium for the respective sizes of the network and derive some comparative statics results for the resulting prices.

买方和卖方通过成为提供者网络的一部分以及每笔交易中获得总利益。提供者向他们收取会员费和交易费，同时承担每位客户和每笔交易的成本。作者随后假设存在一个唯一均衡，用于确定网络规模，并推导出由此产生的价格的比较静态结果。

Such an approach is, however, not without difficulties. One problem of the model is its lack of transparency concerning the mathematical derivations and assumptions. We, therefore, provide a detailed and rigorous description of the model, that goes beyond what Rochet and Tirole offer in their papers, in the appendix. Here we focus on the fundamental problems of their approach to justify an alternative treatment of TSM that transcends these limitations.

然而，这种方法并非没有困难。该模型存在一个问题，即在数学推导和假设方面缺乏透明度。因此，我们在附录中提供了对该模型的详细而严谨的描述，超越了Rochet和Tirole在他们的论文中所提供的内容。在此，我们着重探讨了他们处理TSM问题方法的基本问题，并提出了一种超越这些限制的替代处理方法。

## 3.1 Incapacity To Consider Asymmetry Among Buyers And Sellers



Rochet and Tirole use the product of the total number of buyers and sellers as a proxy for the actual number of transactions. This assumes the probability of interaction between any buyer and seller to be equal. This is not the case in real-life interaction networks.

Rochet和Tirole使用买家和卖家总数的乘积作为实际交易数量的主体。这假设了任何买家和卖家之间的互动概率是相等的。然而，在现实生活中的互动网络中，并非如此。

The assumption not only cuts away a large part of the micro-layer of the system but also renders any distinction between entry fee and per-transaction fee irrelevant. For heterogeneous interaction frequencies, high entry fees would encourage membership among more well-connected, more central agents while high per-transaction fees would discourage this (and in relative terms would encourage membership among less well-connected agents instead). Credit card systems serve as an illustrative example: it must be assumed that geographical distance matters for the interaction patterns and that some buyers travel more widely than others, and that some sellers tend to cater to larger or geographically more dispersed groups of buyers. It is likely that the providers' strategies take this into account.

这种假设不仅削减了系统微观层面的一大部分，还使得入场费和每笔交易费之间的区别变得无关紧要。对于互动频率存在异质性的情况，高入场费会鼓励更为联系紧密、更为核心的主体成为会员，而高每笔交易费则会阻碍这一点（相对而言，它会鼓励那些联系较弱的主体成为会员）。信用卡系统可以作为一个说明性例子：必须假设地理距离对于互动模式具有重要影响，并且一些买家比其他人更广泛地旅行，一些卖家倾向于迎合规模较大或地理分散的买家群体。供应商的策略很可能已经考虑到了这一点。

## 3.2 Necessity To Assume Perfect Information Of Customers



Rochet and Tirole assume that agents can calculate their utility from being part of a provider network in advance. However, one of the central problems for all customers in the real world is that their utility of a provider network depends on the numbers of members of this network. This leads to a recursive relationship between the buyer and seller expectations that is a key aspect of TSM, but is simply assumed away in the model. The assumption is also unnecessary as Rochet and Tirole *assume* the system to converge towards a unique and stable equilibrium. In this case, agents should arrive at the same result by just using past utilities as a proxy for the expected outcome of the current period - a far more realistic scenario which has been explored in the agent-based simulation in Section 4.

Rochet和Tirole假设主体能够事先计算出他们成为供应商网络一部分的效用。然而，在现实世界中，所有客户都面临一个核心问题，即他们对供应商网络的效用取决于该网络的成员数量。这导致了买方和卖方期望之间的递归关系，这是TSM的一个关键方面，但在模型中被简单地假设掉了。这个假设也是不必要的，因为Rochet和Tirole假设系统会收敛到一个唯一稳定的均衡状态。在这种情况下，主体只需使用过去的效用作为当前期望结果的主体 - 这是一个更加现实istic场景，在第4节中进行了基于主体模拟研究。

## 3.3 Transformation Of The System Into A Per-Transaction Mode



Rochet and Tirole transform all costs and utilities into a per-transaction mode. This means that all per-customer terms (the entry fees Ai, utility from network membership, Bi, and true costs, Ci) get divided by the expected number of transactions for that customer. This facilitates the derivation of an equilibrium and removes all remaining differences between entry fees and per-transaction fees which in turn generates problems for computational algorithms in which the provider uses the same optimisation as a basis for her strategy: For the provider, there is no ex-ante difference between raising entry fees or transaction costs. However, ex-post, customers do not have an incentive to pay high per-transaction costs after gaining access to the network paying a still low (or negative) entry fee.

Rochet和Tirole将所有成本和效用转化为每笔交易的模式。这意味着每个客户的入场费（Ai）、加入网络的效用（Bi）和真实成本（Ci）都将被预期交易次数除以。这种转化有助于推导出均衡，并消除了入场费和每笔交易费之间的差异，从而给计算算法带来了问题。提供者在制定策略时使用相同的优化方法，事前无法区分提高入场费还是交易成本。然而，事后客户在支付低（甚至负值）入场费后，并没有动力支付高额的每笔交易成本。

## 3.4 Negative Per-Transaction Benefits For The Customers Cannot Be Considered



The customer's utility function (see equation A1 in Appendix) is assumed to be increasing in the number of customers from the other side, starting from a negative intercept (otherwise, no equilibrium solution would exist, see equation A4 in Appendix). This means customers would not have a dominant incentive to join the network if there were no customers of the other type. In reality, network externalities dictate the provider to first build her user base (by setting negative fees, paying the first users to join the network) before network externalities emerge which can then be harvested by setting positive fees. The software industry provides many examples for such strategies. Further, it is also a potential business strategy to subsidise one side of the market (e.g., the buyers) from the fees paid by the other side. Both cases are plausible and many examples in the real world exist, but they are obviously beyond the scope of the model.

假设客户的效用函数（见附录中的方程A1）随着来自另一方客户数量的增加而增加，从一个负截距开始（否则，将不存在均衡解，见附录中的方程A4）。这意味着如果没有另一类型的客户存在，客户就没有主导动机加入网络。在现实中，网络外部性要求提供者首先建立用户群体（通过设置负费用，向第一个加入网络的用户支付费用），然后才能利用设置正费用来收获网络外部性。软件行业提供了许多此类策略的例子。此外，还有一种潜在的商业策略是通过对另一方支付的费用来资助市场上的一方（例如买家）。这两种情况都是合理的，并且在现实世界中有许多实例存在，但它们显然超出了模型范围。

## 3.5 Assumption Of A Unique Equilibrium



For equilibrium treatments of TSM to be useful, the assumption that the system under investigation is near a unique and stable equilibrium must be plausible. For TSM this is generally not the case. Unfortunately, equilibrium approaches cannot deal with this problem adequately. Rochet and Tirole (Rochet and Tirole, 2006, p.653), for instance, refer to the existence of such an equilibrium under 'regularity conditions' - but it remains unclear what these conditions are.

为了使TSM的均衡处理方法具有实用性，必须合理地假设所研究的系统接近于一个唯一且稳定的均衡状态。然而，对于TSM来说，通常情况并非如此。遗憾的是，均衡方法无法充分解决这个问题。例如，Rochet和Tirole（2006年）提到在“正常条件”下存在这样一个均衡状态，但这些条件具体是什么仍然不清楚。

This is particularly relevant since an algebraic derivation of these conditions is rather complex, even for the most simple possible case. A detailed analytical treatment of the problem is provided in Appendix B. Here we focus on the key message: in many plausible situations, we can show that there is no unique equilibrium and equilibrium models in the style of Rochet and Tirole are unable to say anything about how TSM works in such cases. For example, if some people use their credit cards all the time, while others use them only for specific purposes, such as making hotel reservations or booking flights, we will have a system of demand functions with four equilibria only two of which would be stable. See Figure B2 in Appendix B.

这一点尤为重要，因为即使对于最简单的情况，这些条件的代数推导也相当复杂。附录B中提供了对该问题的详细分析处理。在此我们着重强调一个关键信息：在许多合理的情况下，我们可以证明不存在唯一的均衡，并且像Rochet和Tirole所提出的均衡模型无法解释在这种情况下TSM是如何运作的。例如，如果有些人总是使用信用卡，而其他人只在特定场合使用信用卡，比如预订酒店或机票，那么我们将得到一个具有四个均衡点的需求函数系统，其中只有两个是稳定的。请参见附录B中图B2。

The Rochet-Tirole model generally neglects such cases. It's central result - that TSM
conforms to the Lerner equation prescribing an equal ratio between prices and priceelasticities of demand for both seller and buyer prices - is difficult to test as all the relevant terms in the model mutually depend on each other and only price and demand can be isolated empirically. Given their methodological focus on equilibrium models, Rochet and Tirole are unable to provide any general conclusions beyond saying that higher numbers of 'captive' customers of type i lead to higher prices for type i: a larger number of already committed sellers prompts the provider to set lower prices for buyers and increase the price for sellers (Rochet and Tirole, 2006, p.659).

Rochet-Tirole模型通常忽略了这些情况。该模型的核心结果是，TSM符合Lerner方程，该方程规定了卖方和买方价格之间的价格弹性比率相等。然而，由于模型中所有相关术语相互依赖，只有价格和需求可以在实证上被隔离出来，因此很难进行测试。鉴于他们方法论上对均衡模型的关注，Rochet和Tirole无法提供任何超出以下结论的一般性结论：更多类型i的“囚徒”顾客会导致类型i的更高价格。具体而言，更多已经承诺销售者会促使提供者为买家设定较低价格并增加卖家的价格（Rochet and Tirole, 2006, p.659）。

This criticism applies to a wide range of equilibrium models and illustrates the fundamentalproblemsofanequilibriumapproachtoasituationinwhichmutualdependence and continuous change are essential properties of the system under investigation.

这种批评适用于广泛的均衡模型，并且说明了均衡方法在研究相互依赖和持续变化是系统的基本特性的情况下所面临的根本问题。

## 4 An Agent-Based Model Of Tsm



We now describe our ABM. Because the focus is on studying the price setting behaviour of the provider, the customer agents are designed as simple as possible. An overview over the parameters of the model can be found in Table 1.

我们现在描述我们的基于主体的模型。由于重点是研究提供者的价格设定行为，所以顾客主体被设计得尽可能简单。模型参数的概述可以在表1中找到。

## 4.1 The Customers 4.1.1 Construction Of The Agents



The customer agents are instantiated as either buyers or sellers. Their type remains constant over time. While we also studied the impact of varying group sizes on the model output (see Section 5 and Figure 2), we use, where not indicated otherwise, a standard setting with 2000
sellers and 10,000 buyers. Agents start in t0 with a wealth of zero and are heterogeneous concerning their per-transaction benefits, bi.3 This benefit changes every round and is drawn from a uniform distribution.

顾客主体被分为买家和卖家两种类型，并且他们的类型在时间上保持不变。尽管我们还研究了不同群体规模对模型输出的影响（详见第5节和图2），但在未另行指示的情况下，我们采用标准设置，即2000个卖家和10000个买家。主体在t0时刻以零财富开始，并且在每一轮中都具有不同的交易效益bi，该效益是从均匀分布中随机抽取得到的。

| Symbol                                  | Name                                  | Description                | Default value   |
|-----------------------------------------|---------------------------------------|----------------------------|-----------------|
| A                                       |                                       |                            |                 |
| i                                       |                                       |                            |                 |
| fixed                                   |                                       |                            |                 |
| Fixed entry fee                         | Relevant only in the optimisation     |                            |                 |
| (0                                      | ,                                     |                            |                 |
| −                                       |                                       |                            |                 |
| 200)                                    |                                       |                            |                 |
| case (endogenous otherwise)             |                                       |                            |                 |
| ]                                       |                                       |                            |                 |
| N                                       |                                       |                            |                 |
|                                         | B                                     |                            |                 |
| Number of buyers                        | -                                     | 10,000                     |                 |
| g                                       |                                       |                            |                 |
| N                                       |                                       |                            |                 |
|                                         | S                                     |                            |                 |
| Number of sellers                       | -                                     | 2000                       |                 |
| ]                                       |                                       |                            |                 |
| N                                       |                                       |                            |                 |
|                                         | P                                     |                            |                 |
| Number of providers                     | -                                     | 1, 10                      |                 |
| C                                       |                                       |                            |                 |
| fixed                                   |                                       |                            |                 |
| Provider fixed cost                     | -                                     | 10,000                     |                 |
| C                                       |                                       |                            |                 |
| i                                       |                                       |                            |                 |
| Per customer fixed costs                | Costs incurred to the provider        | 50                         |                 |
| for every customer                      |                                       |                            |                 |
| c                                       |                                       |                            |                 |
| i                                       |                                       |                            |                 |
| Per transaction costs                   | Costs incurred to the provider        | 25                         |                 |
| for every transaction                   |                                       |                            |                 |
| t                                       |                                       |                            |                 |
| max                                     |                                       |                            |                 |
| Nb. of time steps                       | -                                     | 500                        |                 |
| -                                       | Nb. of transactions                   | -                          | 30,000          |
| per iteration                           |                                       |                            |                 |
| -                                       | Subscription threshold                | Customers do not try       | 400             |
| to subscribe to further providers       |                                       |                            |                 |
| if their revenue is below the threshold |                                       |                            |                 |
| ¯                                       | p                                     |                            |                 |
| Mean reservation price                  |                                       |                            |                 |
| p                                       |                                       |                            |                 |
| r                                       |                                       |                            |                 |
| B                                       |                                       |                            |                 |
|                                         | ∝ U                                   |                            |                 |
| (¯                                      | p,                                    | 1                          | .               |
| and                                     | 1000                                  |                            |                 |
| p                                       |                                       |                            |                 |
| r                                       |                                       |                            |                 |
| S                                       |                                       |                            |                 |
|                                         | ∝ U                                   |                            |                 |
| (0                                      | .                                     | 5¯                         | p,              |
| c                                       |                                       |                            |                 |
| R                                       |                                       |                            |                 |
| Roaming costs                           | Costs incurred to customers           | 100                        |                 |
| when using the network of a             |                                       |                            |                 |
| provider they have no subscription with |                                       |                            |                 |
| F                                       |                                       |                            |                 |
| Entry fee range                         | Range of admissible entry fees        | (–3000, 5000)              |                 |
| F                                       |                                       |                            |                 |
| Transaction fee range                   | Range of admissible transaction fees. | (–1000, 1010)              |                 |
| -                                       | Ema-Faktor                            | Exponential moving average | 0.01            |
| factor governing the adaptation speed   |                                       |                            |                 |
| of the reinforcement learning mechanism |                                       |                            |                 |

| 符号                                  | 名称                                  | 描述                | 默认值   |
|-----------------------------------------|---------------------------------------|----------------------------|-----------------|
| A                                       |                                       |                            |                 |
| i                                       |                                       |                            |                 |
| 固定                                   |                                       |                            |                 |
| 固定入场费                         | 仅在优化中相关     |-                           |-                |
|(0                                      |-                                     |-                            |-                 |
|-                                      |-                                        |-                             |-               |
|-                                      |--                                    |--                          |--               |
|-200)                                    |--                                     |--                          |--               |
|--                                      |--                                        |--                             |--              |
|--                                      |_B_                                     |_买家数量_                       |_10,000_                ||
|-                                      ||g                                         ||N                                         ||S                                          ||
|--                                     ||卖家数量                        ||-                                         ||2,000_                      ||
|--                                     |_|N                                        |_|P                                          ||
||供应商数量                     ||-                                          |_1，10_                      ||
||C                                        ||固定                                 ||-                                           |_10,000_                    ||
||C                                        ||i                                           ||-                                           |_每个客户的固定成本_|50||
||c                                         ||=i                                            ||=每笔交易的成本_|25||
||t                                          ||=                                             ||=                                              ||=500||
||最大时间步数                       ||=                                             ||
||||每次迭代的交易数                   ||
||||订阅门槛                               ||
||||如果他们的收入低于门槛，则不尝试进一步订阅提供商|
||(¯p)                                   ||
||平均保留价格                           ||
||(p)                                    ||
||(r)                                    ||
||(B)                                    ||
||(∝U)                                |
||(¯p,p,r,S)                           ||
||(0,.5¯p,c,R)                        ||
||漫游成本                               ||
||当使用没有订阅的提供商的网络时，顾客产生的成本|
||F                                        ||
||入场费范围                             ||
||可接受入场费范围                     |
||(–3000, 5000)                       |
||F                                        |
||交易费范围                            |
||(–1000, 1010)                       |
|-                                         |-                                          |-                                           |-.01

There are two reasons for these assumptions: Firstly, this largely fulfils the assumption of Rochet and Tirole (2003) and Rochet and Tirole (2006) with one stable equilibrium. Secondly, the main interest of the present research is not the influence of particular distributions of preferences, but the pricing behaviour of the providers.

这些假设有两个原因：首先，这符合Rochet和Tirole（2003）以及Rochet和Tirole（2006）的一个稳定均衡的假设。其次，本研究的主要关注点并非特定偏好分布的影响，而是提供者的定价行为。

At t0 all customers are subscribed to one of the providers chosen randomly for each customer.

在t0时刻，所有客户都订阅了随机选择的一个提供者。

## 4.1.2 Decision Making Of The Agents



For a constant number of transactions in every round, two customers (one buyer and one seller) are chosen randomly. Each of those transactions is conducted only if a positive transaction benefit (shared equally afterwards4) remains for the two customers after subtraction of per-transaction prices they would incur in conducting the transaction.

对于每一轮中的固定交易数量，随机选择两个客户（一个买家和一个卖家）。只有在扣除他们进行交易所需的每笔交易价格后，两个客户之间仍然存在正的交易利益（之后平均分配）时，才会进行这些交易。

In every round, agents may decide to join one of the provider's networks. In the model by Rochet and Tirole, the decision is made according to the following formula (which has been adjusted for the discrete case):

在每一轮中，主体可以决定加入供应商的网络之一。在Rochet和Tirole的模型中，决策根据以下公式进行（已经针对离散情况进行了调整）：

$$b_{k}^{i}+\frac{B^{i}-C^{i}}{N_{t-1}^{j}}\geq p_{t-1}^{i}=a_{k}^{i}+\frac{A^{i}-C^{i}}{N_{t-1}^{j}}.$$ $$b_{k}^{i}+\frac{B^{i}}{N_{t-1}^{j}}\geq p_{t-1}^{i}=a_{k}^{i}+\frac{A^{i}}{N_{t-1}^{j}}.$$
The condition is most conveniently verified by assessing whether or not the agent incurred losses by participating in the network (of this particular provider) in the last period. We, therefore, tanslate this function into decision Algorithm 1 for agent k (assuming k is a seller and that the number of buyers in the network has not yet been updated; we also assume that if the agent is not subscribed to any provider, one is randomly assigned with a moderate probability of 10%:5)
Algorithm 1 Decision making algorithm for customer k.

$$b_{k}^{i}+\frac{B^{i}-C^{i}}{N_{t-1}^{j}}\geq p_{t-1}^{i}=a_{k}^{i}+\frac{A^{i}-C^{i}}{N_{t-1}^{j}}.$$ $$b_{k}^{i}+\frac{B^{i}}{N_{t-1}^{j}}\geq p_{t-1}^{i}=a_{k}^{i}+\frac{A^{i}}{N_{t-1}^j}$$. 

为了方便验证条件，我们可以通过评估主体在上一个周期参与该特定供应商网络时是否遭受了损失来进行判断。因此，我们将这个函数转化为决策算法1，用于主体k（假设k是卖方，并且网络中的买方数量尚未更新；我们还假设如果主体没有订阅任何供应商，则以10%:5的适度概率随机分配一个）。算法1：客户k的决策算法。

if providerlistk! = {} then
   for all P ∈ providerlistk do
       if revenue from transactions using provider P is < 0 then
           remove P from providerlistk
       end if
   end for
end if
if providerlistk = {} and with probability 0.1 or revenuek > 400 then
   Select random provider P0
   Add P0 to providerlist
end if

若providerlistk不为空，则遍历providerlistk中的每个供应商P：
若使用供应商P进行交易的收入小于0，则将其从providerlistk中移除。
结束循环。

若providerlistk为空，并且以0.1的概率或revenuek大于400，则随机选择一个供应商P0，并将其添加到providerlist中。

A particular provider is selected randomly by the agent with the probability to select provider i being a monotonically increasing function of the share of customers already subscribed to provider i.

由主体主体随机选择一个特定的供应商，选择供应商i的概率是已经订阅了供应商i的客户份额的单调递增函数。

## 4.2 The Provider Agent



We consider three different price setting strategies for the provider (see Table 2).

我们考虑了供应商的三种不同定价策略（见表2）。

Inthefirstcase,theprovideroptimiseshisprofitsusingadifferentialevolutionalgorithm.

在第一种情况下，供应商使用差分进化算法来优化其利润。

This algorithms helps her compute the optimal entry fees and per interaction fees to be charged from the buyers and sellers. The differential evolution algorithm allows us to study a generative version of the Rochet-Tirole model and to compare it against the other cases as a benchmark. It is certainly the closest replication of a rational choice setting that we can get in a computational context. For such a *quasi rational choice* setting to be tractable, many unrealistic and implausible assumptions such that the provider knows the exact shape of the demand function he faces are required. This setting represents, however, a benchmark against which the other, more realistic versions of the model can be compared. It, therefore, allows us to test whether the inadequacy of the assumptions necessary in the equilibrium context does matter for the outcome of the model. If it did not, the use of equilibrium models *as the one by* Rochet and Tirole could still be justified on the grounds that assumptions in economic models are always to a certain degree unrealistic, but that this 'unrealisticness' does not matter too much.

该算法帮助她计算买家和卖家应收取的最佳入场费和每次交互费用。差分进化算法使我们能够研究Rochet-Tirole模型的生成版本，并将其与其他情况进行比较作为基准。在计算环境中，它确实是最接近理性选择设置的复制品。为了使这种“准理性选择”设置易于处理，需要许多不切实际和不合理的假设，例如供应商知道他面临的需求函数的确切形状。然而，这种设置代表了其他更现实版本模型可以进行比较的基准。因此，它允许我们测试均衡背景下所需假设的不足是否对模型结果产生影响。如果没有影响，则仍然可以通过经济模型中存在一定程度上不切实际的假设来证明使用均衡模型（如Rochet和Tirole提出的）是有道理的，但这种“不切实际性”并不重要。

In order to go beyond the unrealistic assumptions of the original model and to get alternatives to this rational choice benchmark, we implement the model with two versions of a reinforcement learning algorithm for the provider. Providers that use the reinforcement learningalgorithmtosetentryfeesandperinteractionfees adapttheirpricesettingstrategies accordingtotheirsuccessinthepast.Suchbehaviourdoesnotinvolvemanyoftheunrealistic assumptions necessary in the benchmark (such as complete knowledge of the demand functions) and is compatible with the basic notion of bounded rationality. We study the model with and without a satisficing element in the strategy algorithm. Because of the computational simplicity of the reinforcement learning mechanism, we are also able to study the behaviour of the model with more than one provider.

为了超越原始模型的不切实际假设，并寻找替代方案以突破这种理性选择基准，我们采用两个版本的强化学习算法来实现供应商模型。供应商使用强化学习算法来设定入场费和每次交互费用，并根据过去的成功情况调整其定价策略。这种行为不涉及基准模型中所需的许多不切实际假设（如对需求函数的完全了解），并且与有限理性的基本概念相符。我们研究了具有满意元素和无满意元素两种策略算法的模型。由于强化学习机制计算简单，我们还能够研究具有多个供应商的模型行为。

## 4.2.1 Instantiation Of The Provider Agent



The provider gets instantiated with a list recording the subscriptions and the profits. Depending on which case of Table 2 we consider, she is assigned a strategy according to which she sets the entry fees and per transaction fees. This can be either a differential evolution algorithm that should mimic an optimal and rational choice (to replicate the results of Rochet and Tirole) or a reinforcement learning algorithm, which represents a more realistic scenario of how the providers set their prices.

供应商根据记录订阅和利润的列表进行实例化。根据我们考虑的Table 2的情况，她将根据策略来设定入场费和每次交互费用。这可以采用差分进化算法，以模拟最优和理性选择（以复制Rochet和Tirole的结果），也可以采用强化学习算法，以更真实地反映供应商设定价格的情景。

Cases considered
Provider decision
One
Ten
Fixed
Endogenous
making
Description
provider
providers
entry fees
entry fees
Optimisation
The provider knows the
X
X
algorithm
distribution of the customers' reservation prices and uses a differential evolution algorithm to optimise his profit every round
Reinforcement
The provider changes
X
X
X
learning
the transaction and subscription fees for the customers depending on
whether his revenues have
risen of fallen compared with the previous round
Reinforcement
In this case the provider
X
X
X
learning with
stops changing his strategy
satisficing
after having reached a satisfying level of profits

案例考虑
供应商决策
一个
十个
固定的
内生的
制定
描述
供应商
供应商们
入场费用
入场费用
优化算法
供应商了解顾客保留价格的分布，并使用差分进化算法来优化每一轮的利润。
强化学习算法根据前一轮的收入变化，调整顾客的交易和订阅费用。
在达到满意的利润水平后，供应商停止改变策略。

## 4.2.2 Price Setting Strategies For The Provider Provider Decision Using A Differential Evolution Algorithm



Every round the provider maximises her profits using a differential evolution algorithm (Storn and Price, 1997). Such optimisation algorithms require the provider to be informed about the distribution of the reservation prices and the types of the customer agents. Therefore, this decision-making algorithm is not very realistic and used only to replicate the results of Rochet and Tirole in a generative and agent-based framework and to serve as an ideal benchmark case that can be compared to other decision-making concepts. It illustrates, however, some of the fundamental difficulties of Rochet and Tirole's model that remain unaddressed in an analytical framework: While the algorithm is rather successful in finding optima on target functions that are not too rugged and works very well for per-transaction fees for buyers and sellers (as, aB) as free variables (with fixed entry fees AS, AB), it fails in cases where the provider must set all four variables (AS, AB, as, aB).6 This indicates that assuming a provider acts in an optimising way is a very misleading assumption, rather than a useful abstraction of reality.

每一轮中，供应商使用差分进化算法（Storn和Price, 1997）来最大化其利润。这种优化算法要求供应商了解保留价格的分布以及顾客主体的类型。因此，这个决策算法并不是非常现实，只是为了在生成性和基于主体的框架中复制Rochet和Tirole的结果，并作为一个理想的基准案例，可以与其他决策概念进行比较。然而，它揭示了Rochet和Tirole模型中一些基本困难，在分析框架中仍未得到解决：虽然该算法在找到目标函数上不太复杂且对于买家和卖家（如aB）作为自由变量（固定入场费AS, AB）的每笔交易费用非常成功，并且在必须设置所有四个变量（AS, AB, as, aB）时表现出色。6 这表明假设供应商以最优化方式行事是一个非常误导人的假设，而不是对现实有用的抽象。

## Provider Decision Using Reinforcement Learning



Amorerealisticconceptionofthedecision-makingprocessistouseareinforcementlearning algorithm:7 in this case, the distributions of bi and Bi remain unknown to the provider.

供应商决策使用强化学习算法是对决策过程的一个更加现实的理解：在这种情况下，bi和Bi的分布对供应商来说仍然是未知的。

Instead, she considers her success in the past and adjusts her prices accordingly.

相反，她考虑过去的成功并相应地调整价格。

There are three different ways the provider can adjust her prices: firstly, to continue using the current price, secondly, to increase the prices towards some maximum value and, thirdly, to decrease the prices towards a (negative) minimum value.8 All three possibilities are assigned a certain probability weight that gets adjusted according to the success of the provider compared to past revenues.

供应商可以通过三种不同的方式来调整价格：首先，继续使用当前价格；其次，将价格提高到某个最大值；第三，将价格降低到一个（负）最小值。这三种可能性都会被赋予一定的概率权重，并根据供应商与过去收入的成功程度进行调整。

Practically, the provider decides according to the following procedure:

实际上，供应商根据以下程序来决策：

1
She checks whether she can match her operating costs. If not, then the current strategy gets discouraged strongly and the strategy is set back to a sustainable (though not necessarily very successful) initial value.9
2
She takes the revenue of the previous round as a relative success measure.10
3
The probability weights of all strategies are adjusted, with the probability weight of the current strategy increased if the strategy was successful, otherwise decreased.
4
The provider chooses new prices according to the current probability weights.

1. 她核对运营成本是否能够匹配。如果不能，那么当前策略将受到严重打击，并将策略重新调整为可持续的（尽管不一定非常成功）初始值。

2. 她以上一轮的收入作为相对成功的衡量标准。

3. 调整所有策略的概率权重，如果策略取得成功，则增加当前策略的概率权重；否则减少。

4. 供应商根据当前概率权重选择新的价格。

## Provider Decision Using Reinforcement Learning With Satisficing



The above reinforcement learning strategy may be extended to include satisficing in the sense of Simon (1955). In this case, before step 3 in the above algorithm, the provider checks whether a satisficing level of revenue and number of customers is reached. If this is the case, the strategy is not changed and the provider does not update her prices. If no satisficing level is reached, the provider acts identically as above.

上述的强化学习策略可以扩展，以包括Simon（1955）所提出的满足性概念。在这种情况下，在上述算法的第3步之前，供应商会检查是否达到了满意的收入和客户数量水平。如果是这样，策略将保持不变，供应商将不会更新其价格。如果未达到满意水平，则供应商将按照上述相同的方式继续行动。

## 4.3 Summary Of The Simulation



Here we summarise the sequence of events for the whole simulation. Note that a welldocumented version of the source code is also available via the GitHub repository "Beyond_Equilibrium" (https://graebnerc.github.io/Beyond_Equilibrium/).

在这里，我们对整个模拟的事件序列进行了总结。需要注意的是，我们还提供了源代码的详细文档版本，可以通过GitHub存储库“Beyond_Equilibrium”(https://graebnerc.github.io/Beyond_Equilibrium/)获取。

1
Create the agents.
2
Set global provider choice functions containing probability weights for the choice of providers by customers.
3
Create initial allocation of buyer and seller agents to providers (random uniform).
4
Iteration for the specified time steps. Each time step consists of six stages: 1st Stage: Realisation of the transactions.
i
Choose new reservation prices for all buyers and sellers.
ii
Conduct the specified number of transactions
A
Seller and buyer are randomly chosen
B
Compare the reservation prices pr
B and pr
S. Continue only if
pr
B > pr
S.
C
Identify cheapest available channel of transmission between buyer and seller (depending on their subscriptions) and the corresponding transaction cost ct.
D
If pr
B−pr
S
2
> ct, the transaction is conducted, buyers and sellers
receive pr
B−pr
S
2
each, the providers are awarded the transaction costs.
2nd Stage: Customers pay the fees to the provider 3rd Stage: Providers pay fixed costs and per-customer costs. 4th Stage: Data gets collected and evaluated. 5th Stage: Unsubscription decisions by the customers and adjustment of the
providers' network weights.
6th Stage: Subscription decisions of the customers.
i
A customer subscribes to a provider if either of the following is true:
•
If she has more revenue left than a threshold value.
•
If the customer currently has no provider she has to subscribe to a provider with a probability of 0.1. This is necessary to ensure that customers do not immediately join the same unfavourable provider.
ii
A random provider is chosen.
7th
Stage: Reset weights of "providers' and customers' iteration-specific"
variables (money, income, revenue, ...).
8th
Stage: Providers set entry fee and transactions fees for buyers and sellers.

1. 创建主体机构。
2. 设定全球供应商选择函数，其中包含顾客选择供应商的概率权重。
3. 随机均匀分配买方和卖方主体机构给供应商。
4. 按照指定的时间步骤进行迭代。每个时间步骤包括六个阶段：
   第一阶段：交易实现。
   i. 为所有买方和卖方选择新的保留价格。
   ii. 进行指定数量的交易：
       A. 随机选择卖方和买方。
       B. 比较保留价格prB和prS。仅当prB > prS时继续进行。
       C. 根据其订阅情况，确定买方和卖方之间最便宜的传输渠道以及相应的交易成本ct。
       D. 如果prB−prS/2 > ct，则进行交易，买方和卖方各获得prB−prS/2，供应商获得交易成本奖励。

   第二阶段：顾客向供应商支付费用。
   第三阶段：供应商支付固定成本和每位顾客成本。
   第四阶段：收集并评估数据。
   第五阶段：顾客取消订阅决策，并调整供应商网络权重。
   第六阶段：顾客的订阅决策。
   i. 如果满足以下条件之一，顾客将订阅供应商：
      - 剩余收入超过阈值。
      - 顾客当前没有供应商，以0.1的概率订阅供应商。这是为了确保顾客不会立即加入相同的不利供应商。
   ii. 随机选择一个供应商。

7. 重置“供应商和顾客迭代特定”变量（资金、收入、收益等）的权重。
8. 供应商为买方和卖方设置进入费用和交易费用。

## 5 Simulation Results 5.1 Optimal Provider Decision Using A Differential Evolution Algorithm



Simulation results for rationally optimising providers are shown in Figures 1 (buyer and seller transaction prices) and 3 (welfare distribution).

通过差分进化算法对理性优化供应商的模拟结果如图1（买方和卖方交易价格）和图3（福利分配）所示。

As expected, the provider consistently chooses the same prices in every time period. The unbiased random distortion arises from imperfections in the approximative optimisation algorithm. This leads to a stable overall result after a potential initial adjustment of the size of the networks (agents with low bi leaving). The result is also invariant with respect to the number of providers as all rational optimisers will compute the same optimal prices: as the increasing returns brought about by the network externalities favour large competitors, all but one of these providers will fade into obscurity while one will take over the entire population and continue identically to the case of just one provider. Since the rational optimisers are by design perfectly informed (see Section 4.2), they outcompete heuristic decision-makers when confronted with them.

正如预期的那样，供应商在每个时间段都始终选择相同的价格。这种不偏的随机扭曲是由于近似优化算法中的不完美之处所引起的。在网络规模进行潜在初始调整（低bi值主体离开）后，整体结果变得稳定。由于网络外部性带来的递增回报使大型竞争对手更具优势，因此所有理性优化者将计算出相同的最优价格。其他供应商将逐渐被边缘化，只有一个供应商将占据整个市场并继续以与只有一个供应商时完全相同的方式运作。由于理性优化者在设计上具有完全信息（见第4.2节），他们能够在面对启发式决策者时取得竞争优势。

The rationally optimising provider is included as a benchmark case and as a point of comparison to Rochet and Tirole's model. While it would be as difficult to scrutinise whether the Lerner formula holds (Rochet and Tirole's central result) as it is in reality, Rochet and Tirole's interpretation of the same as more 'captive' customers of type i leading to higher prices for this type can be verified. The present ABM does not allow for 'captive' customers, but higher numbers of buyers relative to that of sellers do indeed lead to higher prices for buyers and lower ones for sellers. Figure 2 shows the prices set by rational optimisation with differential evolution for different numbers of buyers compared to a constant 2000 sellers (with a constant expected potential number of transactions per customer). The result of the equilibrium model is nicely reproduced and has an intuitive interpretation: the smaller group has a more powerful position than the larger group, as they are important for the provider to build up a network. This, however, is but a tiny part of the rich dynamics that result from the more realistic heuristic decision mechanisms below.

为了与Rochet和Tirole的模型进行比较，我们将理性优化供应商作为基准案例。尽管在现实中很难验证Lerner公式是否成立（Rochet和Tirole的核心结果），但我们可以验证Rochet和Tirole对此的解释，即类型i的“被囚禁”客户导致该类型客户价格更高。然而，目前的基于主体模型不考虑存在“被囚禁”客户，但买家数量相对于卖家数量较多确实会导致买家价格上涨、卖家价格下降。图2显示了通过差分进化进行理性优化时不同买家数量与恒定2000个卖家（每位顾客预期潜在交易次数恒定）相比所设定的价格。这一均衡模型的结果得到了很好地复现，并且具有直观解释：较小群体比较大群体具有更强大的地位，因为他们对供应商建立网络至关重要。然而，这只是从下面更加真实的启发式决策机制中产生出来丰富动态中微小部分。

Interestingly, the rational optimisation mechanism only works well with fixed entry fees, i.e., with only the transaction fees being subject to optimisation. Simultaneous optimisation of all four terms fails, non-optimal prices are set, and the network collapses. This is because most parameter settings then lead to empty networks and thus a (constant) non-existing profit with nothing to optimise. The field of successful values is small and accidentally hit by the initial population only in rare cases. This is yet another powerful argument against the use of models that simply *assume* that such unique and stable equilibria exist and can be reached by the provider.

有趣的是，理性优化机制只在固定入场费的情况下有效，即仅对交易费用进行优化。同时优化所有四个项会导致失败，设定非最优价格，并导致网络崩溃。这是因为大多数参数设置会导致空网络，从而产生（恒定的）不存在的利润，没有任何可以进行优化的内容。成功值范围很小，并且只有在初始人口中偶尔命中。这又是反对使用仅“假设”存在此类独特且稳定均衡并可由供应商达到的模型的又一个有力论据。

In summary, our model is able to transfer the basic model by Rochet and Tirole into an agent-based framework and to study the importance of several important assumptions. The difficulties we encounter cast serious doubts on whether the equilibrium-based approach is useful in the context of TSM.

总之，我们的模型能够将Rochet和Tirole的基本模型转化为基于主体的框架，并研究几个重要假设的重要性。我们遇到的困难严重怀疑均衡为基础的方法在TSM背景下是否有用。

## 5.2 Reinforcement Learning And Satisficing



Using the reinforcement learning algorithm for the decision-making of the providers allows us both to drop unrealistic assumptions - e.g., the perfect information about demand functions and the ability to perform the optimisation - and to let the provider set the entryfees for the customers endogenously. However, the results are more volatile and path dependent than for the differential evolution algorithm case. The system does not converge towards an equilibrium. Instead, it follows certain quasi-periodical patterns; once the different runs are out of sync, the corridor of results widens, although the simulation still indicates a clear corridor in which the results can be found.

通过使用强化学习算法来进行供应商决策，我们能够摒弃一些不切实际的假设，例如对需求函数的完美信息和优化能力，并使供应商能够内生地确定客户的入场费用。然而，与差分进化算法相比，结果更加波动且路径依赖性更强。系统不会收敛到一个均衡状态，而是遵循某种准周期模式；一旦不同运行失去同步，结果范围会扩大，尽管模拟仍然显示出明确的结果范围。

A selection mechanism works on the providers' strategies in the form of customers joining networks with more favourable price setting and generating both network externalities and revenue there. The selection mechanism does, however, only function if there is competition.

一个选择机制作用于供应商的策略，以更有利的价格设置吸引客户加入网络，并在那里产生网络外部性和收入。然而，这个选择机制只有在存在竞争时才能发挥作用。

Consequently, simulation runs with only one single provider generally result in malicious pricing behaviour, destruction of the network and complete failure (see the number of customers as shown in Figure 4). Without satisficing (upper left panel), only the 10%
customers that randomly join the provider's network before leaving it again in the following period remain. As this is an artefact of the simulation design, this strategy can be considered to be absolutely unsuccessful. Withsatisficing (upper right panel), the providermay succeed, but the network still breaks down in more than 60% of the runs. In the case of multiple (in our case 10) competing providers, the network is successfully established in many runs both with and without satisficing. With satisficing (lower right panel), the average number of customers shows a clear upward trend, something that does not occur in the setting without satisficing (lower left panel) because reinforcement learning can lead to overshoots (driving prices too high or too low) if satisficing does not freeze the strategy at some satisfactory setting. It is important that the heuristic decision-making provider is more successful if the range of possible successful price settings is larger, e.g., if ceteris paribus the fixed costs the provider faces are lower. This is shown for the case with 10 providers employing reinforcementlearningwithsatisficinginFigure5.Iftheviablerangeofsuccessfulstrategies is lower, the probability to hit one of them by chance is lower and the expected time to the successful establishment of a network by any one of the providers increases.

因此，仅有一个供应商的模拟运行通常会导致恶意定价行为、网络破坏和完全失败（见图4中的客户数量）。在没有满足条件的情况下（左上面板），只有10%的客户在随机加入供应商网络后，在下一个周期再次离开。由于这是模拟设计的产物，可以认为这种策略是绝对不成功的。在满足条件的情况下（右上面板），供应商可能会成功，但在超过60%的运行中，网络仍然崩溃。在多个（我们这里是10个）竞争供应商存在的情况下，无论是否满足条件，在许多运行中都成功建立了网络。在满足条件的情况下（右下面板），平均客户数量呈明显上升趋势，而在没有满足条件设置时（左下面板）则不会发生这种情况，因为如果没有满足条件将策略固定在某个令人满意的设置上，则强化学习可能导致过度调整价格（价格过高或过低）。重要的是，在启发式决策提供者面临较低固定成本等其他因素不变时，如果可行成功价格设置范围较大，启发式决策提供者将更加成功。这在使用满足条件的强化学习的10个供应商案例中在图5中得到了展示。如果可行成功策略的范围较低，则通过偶然击中其中之一的概率较低，并且任何一个供应商成功建立网络所需的预期时间增加。

As a single provider is usually not able to build up a functioning network, we are now focusing on the cases of 10 providers and study the path dependent pricing decisions in more detail. Analogous to Figures 1 and 3 for the rational optimisation case, Figures 6 and 8 show the development of buyer and seller prices as well as revenue and its distribution among buyers, sellers, and providers for all reinforcement learning providers with (upper panel) and without (lower panel) satisficing. As seen in Figure 6, both types of providers systematically charge a higher subscription fee for the larger group, the buyers. This corresponds to the pattern seen both in Figure 2 for rational optimisation and in Rochet and Tirole's anecdotal evidence and inferred by them to be a result of the Lerner equation. However, the present result is more nuanced: The opposite pattern can be seen for transaction fees, here the customers in the smaller group, the sellers, are charged more. It is crucially important for the provider to have enough members of the smaller group in the network such that sufficiently many interactions can take place. With this accomplished, a higher per-transaction fee can be charged. Indeed, here, the sellers, the members of the smaller group, are charged slightly more, as they have a larger expected number of transactions than the buyers as a result of the different group sizes and the uniform interaction probability. Note that the same pattern can currently be observed for credit card systems in the US with providers subsidising the buyer side with generous benefits while charging the merchant side. Of course, in this case, the merchants simply pass on the fees to the buyers in the form of extra charges for credit cards.

由于单个供应商通常无法建立一个有效的网络，我们现在将重点放在10个供应商的情况下，并更详细地研究路径依赖定价决策。与理性优化案例中的图1和图3类似，图6和图8展示了所有强化学习供应商的买方和卖方价格以及收入及其在买方、卖方和供应商之间的分配情况，其中包括满足条件（上面板）和不满足条件（下面板）。如图6所示，两种类型的供应商都会对较大群体即买方收取更高的订阅费。这与理性优化案例中图2以及Rochet和Tirole提到并推断为Lerner方程结果的模式相一致。然而，目前得出的结果更加细致：交易费用则呈相反模式，即较小群体即卖方被收取更多费用。对于提供者来说，有足够数量的较小群体成员加入网络非常重要，这样才能进行足够多次互动。一旦实现了这一点，则可以收取更高的每笔交易费用。事实上，在这里，作为较小群体成员，卖方被略微多收取费用，因为由于不同的群体大小和统一的互动概率，他们预期的交易次数更多。请注意，目前在美国的信用卡系统中也可以观察到相同的模式，即供应商通过慷慨的福利来补贴买方，并向商家收费。当然，在这种情况下，商家只是将费用转嫁给买方，以额外收取信用卡费用的形式。

Transforming all the different types of fees and prices into one single per-transaction price as done in Rochet and Tirole's approach overlooks this pattern which furthermore is of a strongly path-dependent nature (see Figure 7). That is, it is statistically observable in averages and quantiles of the distribution of results of many simulation runs, but there are runs for which the reversed pattern emerges and persists partly or entirely over the course of the simulation. The same path-dependence is, of course, found in other variables including the size of networks, and the development of revenues.

将所有不同类型的费用和价格转化为一个单一的每笔交易价格，就像Rochet和Tirole的方法所做的那样，忽视了这种模式。此外，这种模式还具有强烈的路径依赖性（见图7）。也就是说，通过对许多模拟运行结果的平均值和分位数进行统计观察，可以发现这种模式，但在某些运行中可能出现相反的模式，并在整个模拟过程中部分或完全持续存在。当然，类似的路径依赖性也存在于其他变量中，包括网络规模和收入发展。

to set optimal prices. However, consistently increasing absolute revenue can be observed for the satisficing strategy (lower panels). It also attains disproportionately higher levels for cases with lower fixed costs.11 The development of revenue is also path-dependent: In some cases, the providers fail to successfully establish a functioning network resulting in the loss of the network externalities that would both continue to sustain the network and generate the bulk of the revenue.

为了设定最优价格，可以采用满足策略（下方面板）来观察绝对收入的持续增长。尤其是在固定成本较低的情况下，这种策略能够实现不成比例的高水平收入。收入的发展也受到路径依赖的影响：在某些情况下，提供商未能成功建立一个运行良好的网络，导致失去了继续支持网络并产生大部分收入的网络外部性。

In all cases, the smaller group, that of the sellers, is much better off as the provider cannot afford losing their support and only hesitantly increases transaction prices for them, which also affects the buyer's ability to conduct cost-effective transactions. In real-world economic systems, the sellers may proceed to pass this entire fee on to the buyers (see above).

在所有情况下，较小的卖方群体都会获得更多好处，因为供应商无法承受失去他们支持的风险，只能勉强提高交易价格，这也影响了买方进行成本效益交易的能力。在现实世界的经济系统中，卖方可能会将整个费用转嫁给买方（见上文）。

Considering these results from a policy perspective suggests that overall welfare could be increased if the public agent supports providers in building up a well-functioning network that generates positive externalities for all agents, and then provides incentives for a sustainable satisficing strategy. This preliminary conclusion, however, illustrates the intricacy of TSM and the need for their further investigation from an agent-based perspective: the original Rochet Tirole model simply assumed away the complexity that makes such policy questions both difficult and interesting.

从政策角度来看，考虑到这些结果表明，如果公共机构支持供应商建立一个能够为所有参与者产生正外部性的良好运作网络，并为可持续满足策略提供激励措施，整体福利可能会增加。然而，这个初步结论揭示了TSM的复杂性以及需要从基于主体的视角进一步研究它们的必要性：原始的Rochet Tirole模型只是假设了使得这类政策问题既困难又有趣的复杂性。

## 6 Conclusions



The present paper contributes to the study of TSM in two respects: Firstly, on the methodological level, we showed that studying two-sided markets with conventional equilibrium models bears the danger to overlook the most fundamental features of these markets. Secondly, on the substantial level, we introduced an agent-based model that illustrates both the usefulness and necessity of a computational approach to the study of TSM.

本文在两个方面对TSM的研究做出了贡献：首先，在方法论层面上，我们指出使用传统均衡模型研究双边市场存在忽视这些市场最基本特征的风险。其次，在实质层面上，我们引入了一个基于主体的模型，以展示计算方法在TSM研究中的实用性和必要性。

With regard to our methodological contribution: The most promising results obtained in conventional equilibrium models are equilibrium conditions - such as the Lerner equation in Rochet and Tirole's approach - which can, given abundant confidence in the result, be interpreted to account for specific pricing patterns - such as higher prices for the customer group with more 'captive' users.

关于我们的方法论贡献：在传统均衡模型中，最有希望的结果是均衡条件，例如Rochet和Tirole方法中的Lerner方程。这些条件可以在对结果充满信心的情况下解释特定的定价模式，例如对具有更多“固定”用户群体的客户群体收取更高价格。

While we have shown that it is possible to reproduce this in a much more realistic agent-based setting with little difficulty, the universality of this result is highly doubtful for two reasons:
Firstly, the entire equilibrium construct rests on an array of incredibly bold assumptions as discussed in Section 3. Our computational approach showed that this unrealisticness matters because relaxing the strong assumptions changes the dynamics predicted by the model significantly.

虽然我们已经展示了在一个更加现实的基于主体的环境中可以轻松地复现这一结果，但是由于两个原因，这一结果的普适性极具疑问：
首先，整个均衡构建基于一系列极为大胆的假设，正如第3节所讨论的那样。我们的计算方法显示出这种不现实性的重要性，因为放宽这些强假设会显著改变模型所预测的动态。

Secondly, agent-based simulations in Section 5 also showed that once the assumption of rational optimisation with perfect information is relaxed, the dynamics of the system become highly path-dependent. Universal prediction *a la* Rochet and Tirole is not appropriate for such systems.

其次，在第5节中，基于主体的模拟也表明，一旦放松理性优化和完美信息的假设，系统的动态变得高度依赖路径。Rochet和Tirole所提出的普适预测对这样的系统并不适用。

With regard to our second contribution, our ABM was able to generate the following insights: First, heuristic decision algorithms, as considered here in the form of reinforcement learning with and without Simonian satisficing, are able to distinguish effectively between user groups and to set subscription and transaction fees accordingly. The dominant pattern was found to be high subscription fees for the side with larger numbers of agents (buyers in our case) in order to subsidise the smaller group while transaction fees were higher for the smaller group that on average conducts more transactions.

关于我们的第二项贡献，我们的基于主体的模型能够提供以下洞见：首先，启发式决策算法（以强化学习和Simonian满足为形式）能够有效区分用户群体，并相应地设置订阅和交易费用。我们发现，主导模式是对拥有更多主体（在我们的案例中是买家）的一方收取较高的订阅费用，以资助规模较小的群体，而对平均进行更多交易的规模较小群体收取较高的交易费用。

Second, in order for the heuristic algorithms to work efficiently, a certain selection pressure is essential. In our case, this was provided by competition between several providers. In real-world economic systems, alternative technological paths are also feasible, e.g., if the dominant video game platform providers charge excessively high prices, sooner or later, another technology will emerge in which the price-setting behaviour happens to be more moderate.

其次，为了使启发式算法能够高效运行，必须存在一定的选择压力。在我们的案例中，这一压力是通过多个供应商之间的竞争所提供的。在现实世界的经济系统中，也存在其他可行的技术路径。例如，如果主导的视频游戏平台提供商收取过高价格，迟早会出现另一种技术，其价格设定行为更加温和。

Third, we found relentless and myopic optimisation, even with (or especially with)
heuristic decision algorithms to be susceptible to unsustainable decisions, specifically overshooting prices. A simple modification, introducing satisficing into the decision mechanism resolves this. Note that the decision mechanisms considered here are still excessively simple, if not trivial. Nevertheless, their application to TSM represents a new contribution to the literature and illustrates the point that decision-makers using extremely simple heuristics can achieve reasonable results. In real-world systems, it is often observed that providers spend long years and unbelievable amounts of money on building up an installed base of users to generate network externalities and attract more users (this being known as the 'burn rate' during the new economy bubble) before starting to make profits. More successful examples include Google and Facebook, less successful (and hence today also less well-known) ones include WorldCom, GeoCities, or Tiscali.

第三，我们发现即使使用（或者尤其是使用）启发式决策算法进行无情和短视的优化，也容易出现不可持续的决策，特别是价格过高。通过引入满足性决策机制的简单修改可以解决这个问题。需要注意的是，在这里考虑的决策机制仍然过于简单，甚至可以说是琐碎。然而，它们在TSM中的应用对文献研究具有新意，并且说明了使用极其简单的启发式方法的决策者可以取得合理结果。在实际系统中，经常观察到提供商花费多年时间和巨额资金来建立用户基础、产生网络外部性并吸引更多用户（在新经济泡沫时期被称为“烧钱速度”）之后才开始盈利。更成功的例子包括谷歌和Facebook，较不成功（因此今天也不太知名）的例子包括WorldCom、GeoCities或Tiscali。

Fourth, a larger field of viable solutions which result in the successful establishment of a network have a profound impact on the speed with which heuristic strategies are able to find them. This translates directly into the probability of the emergence of a network which would then be self-sustainable as a result of the network externality. Factors constraining the size of this field are in our case operating costs of the providers; in real-world systems, this would be complemented by technological aspects, such as the regulatory environment, and cultural factors.

第四，可行解决方案领域的扩大对于启发式策略寻找解决方案的速度具有深远影响，从而直接影响了网络外部性导致的网络自我可持续性的出现概率。在我们的案例中，限制该领域规模的因素是提供商的运营成本；而在实际系统中，这还会受到技术因素（如监管环境）和文化因素的影响。

Finally, as compared to an unrealistic rational optimiser with perfect information, the welfare-efficiency in terms of revenue generated for providers and both types of customers is rather modest in heuristic optimisation cases (and the rational optimiser may not even constitute the welfare optimum). While more sophisticated heuristic strategies may perform better, it is not likely that they will get close to the benchmark. As a complication, any number of interfering effects may occur in real systems: technological lock-ins with huge sunk costs, unsuccessful providers with a high initial 'burn rate', which then translates into losses for investors or for the public, or the complete failure to establish a working network. The complicated two-sided network externality and the disparity between the provider's incentives and public interest and will, in any case, prevent any efficiency-optimising effect that may be present in other economic systems. That is not to say that TSM systems are per se inefficient, merely that regulation can have and did have a positive effect on this.

最后，与具有完美信息的不切实际的理性优化者相比，启发式优化情况下对于提供商和两类客户所产生的收入而言，福利效率相对较低（而理性优化者可能甚至不能构成福利最优解）。虽然更复杂的启发式策略可能表现更好，但它们不太可能接近基准。在实际系统中，可能会出现任意数量的干扰效应：技术锁定带来巨大沉没成本、初期“烧钱速度”高但未能成功的提供商导致投资者或公众遭受损失，或者完全无法建立起有效运行的网络。复杂的双边网络外部性以及提供商激励与公共利益之间的差异将在任何情况下阻止存在于其他经济系统中可能存在的效率优化效应。这并不意味着TSM系统本身是低效的，只是规制可以并且确实对此产生了积极影响。

While our proposed ABM is still exceedingly simple, the first results were already promising and may serve as a starting point for further research. Several aspects naturally warrant further investigation: the effect of non-homogeneous interaction patterns or a non-trivial network structure between customers, more sophisticated strategies on the part of the providers, and possible welfare-enhancing policy measures.

尽管我们提出的基于主体的模型仍然非常简单，但初步结果已经显示出了很大的潜力，并可作为进一步研究的起点。有几个方面自然需要进一步探究：非均匀交互模式或复杂网络结构对客户之间的影响，提供商更为精细复杂的策略，以及可能增强福利的政策措施。

The methodological conclusion of this paper is that all these important aspects require an investigation from an agent-based rather than equilibrium perspective. This will also facilitate the empirical assessment of the theories since ABM enable us to investigate a substantially wider variety of hypotheses both on the assumption and the conclusion side.


本文的方法论结论是，所有这些重要方面都需要从基于主体而不是均衡的视角进行调查。这也将有助于对理论进行实证评估，因为基于主体的模型使我们能够在假设和结论方面研究更广泛的假设。

